# PHP Plugin

The php plugin provides versionator support for PHP/Composer projects.

## Overview

PHP projects using Composer have version in `composer.json`:

```json
{
  "name": "vendor/package",
  "version": "1.2.3"
}
```

## Injection Methods

| Method | Description |
|--------|-------------|
| `emit` | Generate `Version.php` with version constants |
| `patch` | Update `version` field in `composer.json` |

### Emit

Generate a PHP class with version constants:

```bash
versionator emit php
# Creates src/Version.php
```

Generated file:

```php
<?php
// Auto-generated by versionator. Do not edit.

namespace Version;

class Version
{
    public const VERSION = '1.2.3';
    public const MAJOR = 1;
    public const MINOR = 2;
    public const PATCH = 3;
    public const GIT_HASH = 'abc1234';
}
```

Usage:

```php
<?php
use Version\Version;

echo "Version: " . Version::VERSION . "\n";
```

### Patch

Update the version directly in `composer.json`:

```bash
versionator patch php
```

## Composer Integration

### Autoloading

Add to `composer.json`:

```json
{
  "autoload": {
    "psr-4": {
      "Version\\": "src/"
    }
  }
}
```

Then run:
```bash
composer dump-autoload
```

### Composer Scripts

```json
{
  "scripts": {
    "version:bump": "versionator patch increment && versionator patch php",
    "version:emit": "versionator emit php"
  }
}
```

## Build System Integration

### CI/CD (GitHub Actions)

```yaml
- name: Update version
  run: |
    versionator patch increment
    versionator patch php

- name: Install dependencies
  run: composer install

- name: Publish
  run: # your publish command
```

## Configuration

Default output path: `src/Version.php`
Default namespace: `Version`

Override with:

```bash
versionator emit php --output src/MyApp/Version.php --package MyApp
```

## See Also

- [python](../python/) - Python projects (similar interpreted language)
- [ruby](../ruby/) - Ruby projects
