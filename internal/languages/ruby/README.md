# Ruby Plugin

The ruby plugin provides versionator support for Ruby gem projects.

## Overview

Ruby gems use a `.gemspec` file for gem specification:

```ruby
Gem::Specification.new do |spec|
  spec.name    = "mygem"
  spec.version = "1.2.3"
end
```

## Injection Methods

| Method | Description |
|--------|-------------|
| `emit` | Generate `version.rb` with version constants |
| `patch` | Update `spec.version` in `.gemspec` |

### Emit

Generate a Ruby module with version constants:

```bash
versionator emit ruby
# Creates lib/version.rb
```

Generated file:

```ruby
# frozen_string_literal: true
# Auto-generated by versionator. Do not edit.

module Version
  VERSION = "1.2.3"
  MAJOR = 1
  MINOR = 2
  PATCH = 3
  GIT_HASH = "abc1234"
end
```

Usage:

```ruby
require_relative 'version'

puts "Version: #{Version::VERSION}"
```

### Patch

Update the version directly in your gemspec:

```bash
versionator patch ruby --file mygem.gemspec
```

## Gem Integration

### Project Structure

```
mygem/
├── mygem.gemspec
├── lib/
│   ├── mygem.rb
│   └── version.rb    # Generated
└── VERSION
```

### Using in Gemspec

Reference the generated version in your gemspec:

```ruby
require_relative 'lib/version'

Gem::Specification.new do |spec|
  spec.name    = "mygem"
  spec.version = Version::VERSION
end
```

Or use versionator's patch to update the gemspec directly.

## Build System Integration

### Rake

```ruby
# Rakefile
task :version do
  sh "versionator emit ruby --output lib/version.rb"
end

task :build => :version do
  sh "gem build mygem.gemspec"
end
```

### CI/CD (GitHub Actions)

```yaml
- name: Generate version
  run: versionator emit ruby --output lib/version.rb

- name: Build gem
  run: gem build mygem.gemspec

- name: Publish to RubyGems
  run: gem push mygem-*.gem
```

## Configuration

Default output path: `lib/version.rb`

Override with:

```bash
versionator emit ruby --output lib/mygem/version.rb
```

## See Also

- [python](../python/) - Python projects (similar interpreted language)
- [php](../php/) - PHP projects
