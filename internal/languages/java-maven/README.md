# Java Maven Plugin

The java-maven plugin provides versionator support for Maven-based Java projects.

## Overview

Maven projects use `pom.xml` for project configuration including version:

```xml
<project>
  <groupId>com.example</groupId>
  <artifactId>myapp</artifactId>
  <version>1.2.3</version>
</project>
```

## Injection Methods

| Method | Description |
|--------|-------------|
| `emit` | Generate `Version.java` with version constants |
| `patch` | Update `<version>` element in `pom.xml` |

### Emit

Generate a Java source file with version constants:

```bash
versionator emit java-maven
# Creates src/main/java/version/Version.java
```

Generated file:

```java
// Auto-generated by versionator. Do not edit.
package version;

public final class Version {
    public static final String VERSION = "1.2.3";
    public static final int MAJOR = 1;
    public static final int MINOR = 2;
    public static final int PATCH = 3;
    public static final String GIT_HASH = "abc1234";

    private Version() {}
}
```

### Patch

Update the version directly in `pom.xml`:

```bash
versionator patch java-maven
```

## SNAPSHOT Versions

Maven SNAPSHOT versions (e.g., `1.2.3-SNAPSHOT`) are supported via the prerelease command:

```bash
versionator prerelease set SNAPSHOT    # Sets version to 1.2.3-SNAPSHOT
versionator prerelease clear           # Removes SNAPSHOT suffix
```

### SNAPSHOT Timestamps

Maven handles SNAPSHOT timestamp resolution (e.g., `1.2.3-20231215.143022-1`) internally during deployment via `mvn deploy`. Versionator does not generate Maven-style timestamps as this is Maven's responsibility during the artifact deployment process.

### Typical Workflow

```bash
# Start development cycle
echo "1.2.3" > VERSION
versionator prerelease set SNAPSHOT
# VERSION now contains: 1.2.3-SNAPSHOT

# Development continues...
# Maven resolves SNAPSHOT to timestamped versions during deploy

# Prepare release
versionator prerelease clear
# VERSION now contains: 1.2.3

# Tag and release
versionator commit
git push --tags

# Start next development cycle
versionator patch increment
versionator prerelease set SNAPSHOT
# VERSION now contains: 1.2.4-SNAPSHOT
```

## Configuration

Default output path: `src/main/java/version/Version.java`

Override with:

```bash
versionator emit java-maven --output src/main/java/com/example/Version.java --package com.example
```

## See Also

- [java-gradle](../java-gradle/) - Gradle-based Java projects
- [kotlin](../kotlin/) - Kotlin projects (works with both Maven and Gradle)
