# Python Setuptools Plugin

The python-setuptools plugin provides versionator support for legacy Python projects using `setup.cfg`.

## Overview

Legacy Python projects using setuptools may have version in `setup.cfg`:

```ini
[metadata]
name = mypackage
version = 1.2.3
```

For modern Python projects using `pyproject.toml`, see [python](../python/).

## Injection Methods

| Method | Description |
|--------|-------------|
| `emit` | Generate `_version.py` with version variables |
| `patch` | Update `version` in `setup.cfg` |

### Emit

Generate a Python module with version variables:

```bash
versionator emit python-setuptools
# Creates _version.py
```

Generated file:

```python
"""Auto-generated by versionator. Do not edit."""

__version__ = "1.2.3"
__version_tuple__ = (1, 2, 3)
__git_hash__ = "abc1234"
```

Usage in your package's `__init__.py`:

```python
from ._version import __version__
```

### Patch

Update the version directly in `setup.cfg`:

```bash
versionator patch python-setuptools
```

This updates:
```ini
[metadata]
version = 1.2.3
```

## Project Structure

```
mypackage/
├── setup.cfg
├── setup.py           # May be minimal or empty
├── mypackage/
│   ├── __init__.py
│   └── _version.py    # Generated
└── VERSION
```

## Migration to pyproject.toml

Consider migrating to `pyproject.toml` (PEP 621):

```bash
# 1. Create pyproject.toml with your settings
# 2. Switch to the python plugin
versionator emit python --output mypackage/_version.py
versionator patch python --file pyproject.toml
```

## Build System Integration

### CI/CD (GitHub Actions)

```yaml
- name: Generate version file
  run: versionator emit python-setuptools --output mypackage/_version.py

- name: Build package
  run: python setup.py sdist bdist_wheel

- name: Publish to PyPI
  run: twine upload dist/*
```

## Configuration

Default output path: `_version.py`

Override with:

```bash
versionator emit python-setuptools --output mypackage/_version.py
```

## See Also

- [python](../python/) - Modern Python projects (pyproject.toml)
