# TypeScript + Versionator Example

This example demonstrates how to integrate versionator with a TypeScript project.

## Approach

For TypeScript projects, use `versionator emit ts` to generate a version file at build time.

### How It Works

1. `VERSION` file contains the version (managed by versionator)
2. At build time, run `versionator emit ts -o src/version.ts`
3. TypeScript code imports the generated version module
4. TypeScript compiler includes version in the build output

## Files

```
examples/typescript/
├── src/
│   ├── index.ts          # Main application (imports version)
│   ├── version.ts        # Generated by versionator (git-ignored)
│   └── version.tmpl.ts   # Optional: custom template
├── package.json          # NPM package config
├── tsconfig.json         # TypeScript configuration
├── Makefile              # Make targets
├── justfile              # Just targets
└── README.md
```

## Usage

### Using Make

```bash
# Create VERSION file (in project root)
echo "1.0.0" > ../../VERSION

# Generate version.ts and run
make run

# Build TypeScript
make build

# Clean generated files
make clean
```

### Using Just

```bash
# Generate version.ts and run
just run

# Build TypeScript
just build

# Bump version and rebuild
just release-patch
```

### Using npm scripts

```bash
# Install dependencies
npm install

# Generate version.ts and build
npm run build

# Run the compiled application
npm start
```

## Generated Output

`versionator emit ts` generates:

```typescript
// Auto-generated by versionator 1.0.0. Do not edit.
export const VERSION: string = "1.2.3";
export default VERSION;
```

## Custom Template

Create `src/version.tmpl.ts`:

```typescript
// Auto-generated by versionator {{.VersionatorVersion}}. Do not edit.
export const VERSION: string = "{{.Version}}";
export const BUILD_INFO = {
    version: "{{.Version}}",
    generator: "versionator {{.VersionatorVersion}}"
} as const;
export default VERSION;
```

Then generate with:

```bash
versionator emit --template-file src/version.tmpl.ts --output src/version.ts
```

## CI/CD Integration

### GitHub Actions

```yaml
- name: Setup Node.js
  uses: actions/setup-node@v4
  with:
    node-version: '20'

- name: Generate version and build
  run: |
    versionator emit ts --output src/version.ts
    npm ci
    npm run build

- name: Run tests
  run: npm test
```

## Best Practices

1. Add `src/version.ts` to `.gitignore`
2. Generate version file in CI/CD before building
3. Use `versionator commit` to create git tags after releases
4. Configure your build tool to run versionator emit before compilation
