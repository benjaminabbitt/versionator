# Build the sample application with version from versionator
build:
    #!/bin/zsh
    set -e
    echo "Getting version from versionator..."
    VERSION=$(../../bin/versionator version 2>/dev/null || echo "NOT SET")
    echo "Generating BuildTime.java from template..."
    sed -e "s/@VERSION@/${VERSION}/g" app/BuildTime.java.tmpl > app/BuildTime.java
    echo "Building sample application with version: $VERSION"
    javac app/Main.java app/BuildTime.java
    echo "Build completed: app/Main.class app/BuildTime.class"

# Run the sample application
run: build
    #!/bin/zsh
    java app.Main

# Clean build artifacts
clean:
    rm -rf app BuildTime.java

# Show the version that would be used
show-version:
    #!/bin/zsh
    VERSION=$(../../bin/versionator version 2>/dev/null || echo "NOT SET")
    echo "BuildTime from versionator: $VERSION"