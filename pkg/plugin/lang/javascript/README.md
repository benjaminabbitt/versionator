# JavaScript Plugin

The javascript plugin provides versionator support for JavaScript/Node.js projects.

## Overview

JavaScript/Node.js projects use `package.json` for version management:

```json
{
  "name": "mypackage",
  "version": "1.2.3"
}
```

## Injection Methods

| Method | Description |
|--------|-------------|
| `emit` | Generate `version.js` with version exports |
| `patch` | Update `version` field in `package.json` |

### Emit

Generate a JavaScript module with version exports:

```bash
versionator emit javascript
# Creates version.js
```

Generated file (CommonJS):

```javascript
// Auto-generated by versionator. Do not edit.
module.exports = {
    VERSION: "1.2.3",
    MAJOR: 1,
    MINOR: 2,
    PATCH: 3,
    GIT_HASH: "abc1234"
};
```

Usage:

```javascript
const { VERSION } = require('./version');
console.log(`Version: ${VERSION}`);
```

For ES modules, consider using the [TypeScript plugin](../typescript/) with `.mjs` extension.

### Patch

Update the version directly in `package.json`:

```bash
versionator patch javascript
```

This updates:
```json
{
  "version": "1.2.3"
}
```

## npm Integration

### Sync with npm version

```bash
# Update VERSION file, then sync to package.json
versionator patch increment
versionator patch javascript

# Or use npm's built-in versioning and sync back
npm version patch
cat package.json | jq -r .version > VERSION
```

### Pre-publish Hook

Add to `package.json`:

```json
{
  "scripts": {
    "prepublishOnly": "versionator emit javascript"
  }
}
```

## Build System Integration

### npm scripts

```json
{
  "scripts": {
    "version:bump": "versionator patch increment && versionator patch javascript",
    "version:emit": "versionator emit javascript"
  }
}
```

### CI/CD (GitHub Actions)

```yaml
- name: Update version
  run: |
    versionator patch increment
    versionator patch javascript

- name: Publish
  run: npm publish
```

## Configuration

Default output path: `version.js`

Override with:

```bash
versionator emit javascript --output src/version.js
```

## See Also

- [typescript](../typescript/) - TypeScript projects (typed exports)
